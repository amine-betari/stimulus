{{ form_start(addToCartForm, {
    attr: { class: 'cart-add-controls d-flex align-items-center justify-content-baseline' }
}) }}
    {% if addToCartForm.color is defined %}
    <div {# data-controller="color-square" #}
         {#
         data-color-id="{{ addToCartForm.vars.data.product.colors[1].id }}"
         data-color-square-color-id-value="{{ addToCartForm.vars.data.product.colors[1].id }}"
         #}
        {{ stimulus_controller('color-square', {
            'color-id': addToCartForm.vars.data.product.colors[2].id
        }) }}
    >
        {{ form_widget(addToCartForm.color, {
            attr: { 'data-color-square-target': 'select' }
        }) }}
        {% for color in addToCartForm.vars.data.product.colors %}
            {# <span
                class="color-square"
                data-action="click->color-square#selectColor"
                style="background-color: rgb({{ color.red }}, {{ color.green }}, {{ color.blue }});"
            >
            </span>
            #}
            <button
                    class="color-square"
                    type="button"
                    data-color-id="{{ color.id }}"

                    data-action="click->color-square#selectColor"
                    data-color-square-target="colorSquare"

                    style="background-color: rgb({{ color.red }}, {{ color.green }}, {{ color.blue }});"
            >
            </button>
        {% endfor %}
    </div>
    {% endif %}

    {{ form_widget(addToCartForm.quantity, {
        attr: { class: 'mx-3' }
    }) }}

    <button  class="btn btn-info btn-sm" formnovalidate>
        +
    </button>
{{ form_end(addToCartForm) }}

<div>
    {{ form_errors(addToCartForm) }}
    {% if addToCartForm.color is defined %}
        {{ form_errors(addToCartForm.color) }}
    {% endif %}
    {{ form_errors(addToCartForm.quantity) }}
</div>
